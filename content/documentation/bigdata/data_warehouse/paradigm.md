---
title: 3.1. 范式
weight: 1
#next: /step1
prev: /data_warehouse
editURL: "https://example.com/edit/this/page"
type: "docs" # 点击后任然显示左边目录
toc: true
math: true
---

## 1. 什么是范式？

{{< callout >}}
  王珊的《数据库系统概论》中的定义，范式是“***符合某一种级别的关系模式的集合，表示一个关系内部各属性之间的联系的合理化程度***”。<br>简单说就是 ***数据表结构符合某种设计标准的级别***。
{{< /callout >}}


<br><br>


## 2. 范式特点

1. 范式级别越高，表设计越标准、规范化；（数据冗余更少；数据一致性更强；依赖关系更合理）
2. 高级别范式必定符合低级别范式要求(如符合2NF必定符合1NF)；
3. 常见范式有1NF、2NF、3NF、BCNF、4NF、5NF；

> - 零范式：***数据中不存在重复数据***；
> - 一范式：在零范式的基础上，加上关系中的 ***每个属性（字段）都不可再分（原子性）***；
    
    
<br><br>


## 3. 常见范式

### 3.1. 零范式

{{< callout >}}
  零范式：***数据中不存在重复数据***。
{{< /callout >}}

| 学生成绩记录                     |
|----------------------------------|
| 1001,张三,CS101,90              |
| 1002,李四,MATH202,85            |
| 1003,王五,PHYS101,92            |
| 1004,赵六,CHEM304,88            |



<br>



### 3.2. 一范式

{{< callout >}}
  一范式：在零范式的基础上，加上关系中的***每个属性（字段）都不可再分（原子性）***<br>
{{< /callout >}}

- 在零范式的基础上 ***加上关系中的每个属性（字段）都不可再分（原子性）*** 这个条件后便形成了符合一范式的表。<br>
- ***1NF是所有关系型数据库的最基本要求***。

| 学号 | 姓名 | 课程编号 | 课程名称 | 成绩 | 教师 |
|------|------|----------|----------|------|------|
| 1001 | 张三 | CS101    | 数据库   | 90   | 王老师 |
| 1001 | 张三 | MATH202  | 高等数学 | 85   | 李老师 |
| 1002 | 李四 | CS101    | 数据库   | 88   | 王老师 |
| 1002 | 李四 | CS102    | python   | 98   | 张老师 |

***一范式（1NP）存在的问题：***

1. ***数据冗余***：相同信息在多个行中重复存储，特别是当存在部分依赖时。如，学生姓名、课程名称和教师信息被重复存储；
2. ***更新异常***：修改一处信息需要更新多处，容易造成数据不一致。如，如果"数据库"课程改名为"数据库系统"，需要更新所有相关行；
3. ***插入异常***：无法单独插入某些信息，必须依赖主键完整信息。如，无法单独添加一个新课程（没有学生选修时）；
4. ***删除异常***：删除某些信息会导致连带删除有用信息。如，删除最后一个选修某课程的学生记录会连带删除该课程信息；
5. ***空间浪费***：固定长度字段可能浪费空间，变长字段管理开销大；

{{< callout type="info">}}
1NF虽然消除了0NF的非原子值问题，但仍需进一步规范化以减少数据冗余和维护异常。
{{< /callout >}}



<br>



### 3.3. 二范式

{{< callout >}}
  二范式：在 1NF 基础上，***消除了非主属性对码的部分依赖***。<br>
  ***确保每一列都和主键完全相关，而不能只与主键的某一部分相关***。
{{< /callout >}}

如下表满足1NF，但存在如下问题，可以将表分解为多个表，消除部分依赖：
- ***部分依赖***（姓名和系别只依赖于学号）
- ***数据冗余***（同一个学生的姓名和系别信息重复存储），
- ***更新异常***（修改学生系别需要更新多行） 等问题。
- ......


| 学号 | 姓名 | 课程编号 | 课程名称 | 成绩 | 教师 |
|------|------|----------|----------|------|------|
| 1001 | 张三 | CS101    | 数据库   | 90   | 王老师 |
| 1001 | 张三 | MATH202  | 高等数学 | 85   | 李老师 |
| 1002 | 李四 | CS101    | 数据库   | 88   | 王老师 |
| 1002 | 李四 | CS102    | python   | 98   | 张老师 |


将原表拆分为3个表，确保 ***每个非主键属性完全依赖于主键***：转换为2NF（2NF在1NF的基础之上，消除了非主属性对于码的部分函数依赖）

1. 学生表（Student），主键：学号，存储学生信息（仅依赖于学号）；
2. 课程表（Course），主键：课程编号，存储课程信息（仅依赖于课程编号）；
3. 选课表（Enrollment），主键：(学号, 课程编号)，存储学生选课及成绩（完全依赖于主键）；

<br>

<div style="display: flex; justify-content: center; width: 100%;">
  <div style="flex: 17%; padding: 10px; box-sizing: border-box; text-align: center;"> 

| 学号 | 姓名 |
|------|------|
| 1001 | 张三 |
| 1002 | 李四 |

  </div>

  <div style="flex: 30%; padding: 10px; box-sizing: border-box; text-align: center;">

| 课程编号 | 课程名称 | 教师   |
|----------|----------|--------|
| CS101    | 数据库   | 王老师 |
| MATH202  | 高等数学 | 李老师 |
| CS102    | Python   | 张老师 |

  </div>

  <div style="flex: 30%; padding: 10px; box-sizing: border-box; text-align: center;">

| 学号 | 课程编号 | 成绩 |
|------|----------|------|
| 1001 | CS101    | 90   |
| 1001 | MATH202  | 85   |
| 1002 | CS101    | 88   |
| 1002 | CS102    | 98   |

  </div>

  <div style="flex: 30%; padding: 10px; box-sizing: border-box; text-align: center;"></div>
</div>


<br>


{{% details title="<font color=Gray face=Georgia size=3>***函数依赖（Functional Dependency）***</font> " closed="true" %}}

在一张表中，在属性（或属性组） $X$ 的值确定的情况下，必定能确定属性 $Y$ 的值，那么就可以说 $Y$ 函数依赖于 $X$ ，写作。类似于函数关系 $y=f(x)$ ，在 $x$ 的值确定的情况下， $y$ 的值一定是确定的。

1. 学号 → 姓名
2. 系名 → 系主任
3. （学号，课名） → 分数

{{% /details %}}











